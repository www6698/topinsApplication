<UserControl x:Class="topinsApplication.topinsControlPad"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
             xmlns:local="clr-namespace:topinsApplication"
             mc:Ignorable="d"
             Width="300" Background="#FF1A1A1A" Margin="8,8,8,8">
             <!--Width="300" Background="#FF1E1E1E" Margin="8,8,8,8" Focusable="True" KeyboardNavigation.TabNavigation="Cycle">-->
    <UserControl.Resources>
        <DataTemplate DataType="{x:Type local:tpSpeedSelectionMvvm}">
            <local:tpSpeedSelection/>
        </DataTemplate>
    </UserControl.Resources>

    <i:Interaction.Triggers>
        <!--<i:EventTrigger EventName="LostFocus">
            <i:InvokeCommandAction Command="{Binding HideSpeedSelection}"/>
        </i:EventTrigger>-->
        <!--<i:EventTrigger EventName="PreviewMouseDown">
            <i:InvokeCommandAction Command="{Binding HideSpeedSelection}" PassEventArgsToCommand="True"/>
        </i:EventTrigger>-->
    </i:Interaction.Triggers>

    <Grid IsEnabled="{Binding IsControlPadEnabled}">
        <Grid.RowDefinitions>
            <RowDefinition Height="1"/>
            <RowDefinition Height="24"/>
            <RowDefinition Height="1"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="1"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="1"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="1"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="1"/>
            <ColumnDefinition/>
            <ColumnDefinition Width="1"/>
        </Grid.ColumnDefinitions>

        <StackPanel Grid.Row="1" Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Top">
            <Label Content="VERSION" FontWeight="ExtraBold" FontSize="14" Margin="0,2,0,0"/>
        </StackPanel>

        <StackPanel Grid.Row="3" Grid.Column="1">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition/>
                    <RowDefinition/>
                    <RowDefinition/>
                    <RowDefinition/>
                    <RowDefinition/>
                </Grid.RowDefinitions>

                <StackPanel Grid.Row="0">
                    <Grid>
                        <GroupBox Header="ZOOM" IsEnabled="True">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="48"/>
                                    <ColumnDefinition/>
                                    <ColumnDefinition Width="48"/>
                                </Grid.ColumnDefinitions>

                                <Button Grid.Column="0" IsEnabled="{Binding IsTransmitEnabled}" Width="24" Height="24" ToolTip="Zoom Out" Margin="0,0,0,20">
                                    <Path Data="{DynamicResource ZoomOut}" Fill="#FF7EE07E" Stretch="Uniform"/>

                                    <i:Interaction.Triggers>
                                        <i:EventTrigger EventName="PreviewMouseDown">
                                            <i:InvokeCommandAction Command="{Binding Transmit}" CommandParameter="{x:Static local:tpCommandKeys.STARTZOOMTELE}"/>
                                        </i:EventTrigger>
                                        <i:EventTrigger EventName="PreviewMouseUp">
                                            <i:InvokeCommandAction Command="{Binding Transmit}" CommandParameter="{x:Static local:tpCommandKeys.STOPZOOMTELE}"/>
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>
                                </Button>
                                <Slider  Grid.Column="1" Minimum="{Binding ZoomMin}" Maximum="{Binding ZoomMax}" Value="{Binding ZoomValue, Mode=TwoWay}" Margin="4,10,4,0">
                                    <i:Interaction.Triggers>
                                        <i:EventTrigger EventName="PreviewMouseUp">
                                            <i:InvokeCommandAction Command="{Binding SetZoom}" CommandParameter="{Binding Value, RelativeSource={RelativeSource AncestorType=Slider}}" />
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>
                                </Slider>
                                <Button Grid.Column="2" IsEnabled="{Binding IsTransmitEnabled}" Width="24" Height="24" ToolTip="Zoom In" Margin="0,0,0,20">
                                    <Path Data="{DynamicResource ZoomIn}" Fill="#FF7EE07E" Stretch="Uniform"/>

                                    <i:Interaction.Triggers>
                                        <i:EventTrigger EventName="PreviewMouseDown">
                                            <i:InvokeCommandAction Command="{Binding Transmit}" CommandParameter="{x:Static local:tpCommandKeys.STARTZOOMWIDE}"/>
                                        </i:EventTrigger>
                                        <i:EventTrigger EventName="PreviewMouseUp">
                                            <i:InvokeCommandAction Command="{Binding Transmit}" CommandParameter="{x:Static local:tpCommandKeys.STOPZOOMWIDE}"/>
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>
                                </Button>
                                <TextBox Grid.Column="1" Text="{Binding ZoomValue, Mode=TwoWay}" HorizontalAlignment="Center" Margin="0,35,0,0" VerticalAlignment="Top" Width="120" FontWeight="Bold" HorizontalContentAlignment="Center">
                                    <TextBox.InputBindings>
                                        <KeyBinding Key="Return" Command="{Binding SetZoom}"/>
                                    </TextBox.InputBindings>
                                </TextBox>
                            </Grid>
                        </GroupBox>
                        <Canvas>
                            <Label Content="{Binding ZoomSpeed}" Canvas.Top="6" Canvas.Right="4" FontWeight="Bold" Tag="{x:Static local:tpCONST.ZOOMSPEED}">
                                <i:Interaction.Triggers>
                                    <i:EventTrigger EventName="MouseDoubleClick">
                                        <i:InvokeCommandAction Command="{Binding ShowSpeedSelection}" CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Label}}"/>
                                    </i:EventTrigger>
                                </i:Interaction.Triggers>
                            </Label>

                        </Canvas>
                    </Grid>
                </StackPanel>

                <Separator Grid.Row="1" Background="#FF3D3D3D" Height="2"/>
                
                <StackPanel Grid.Row="2">
                    <Grid>
                        <!--<GroupBox Header="FOCUS" IsEnabled="False">-->
                        <GroupBox Header="FOCUS">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="48"/>
                                    <ColumnDefinition/>
                                    <ColumnDefinition Width="48"/>
                                </Grid.ColumnDefinitions>

                                <Button Grid.Column="0" IsEnabled="{Binding IsTransmitEnabled}" Width="24" Height="24" ToolTip="Focus Near" Margin="0,0,0,20">
                                    <Path Data="{DynamicResource FocusNear}" Fill="#FF7EE07E" Stretch="Uniform"/>

                                    <i:Interaction.Triggers>
                                        <i:EventTrigger EventName="PreviewMouseDown">
                                            <i:InvokeCommandAction Command="{Binding Transmit}" CommandParameter="{x:Static local:tpCommandKeys.STARTFOCUSNEAR}"/>
                                        </i:EventTrigger>
                                        <i:EventTrigger EventName="PreviewMouseUp">
                                            <i:InvokeCommandAction Command="{Binding Transmit}" CommandParameter="{x:Static local:tpCommandKeys.STOPFOCUSNEAR}"/>
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>
                                </Button>
                                <Slider  Grid.Column="1"
                                         Minimum="{Binding FocusMin}"
                                         Maximum="{Binding FocusMax}"
                                         Value="{Binding FocusValue, Mode=TwoWay}" Margin="4,10,4,0">
                                    <i:Interaction.Triggers>
                                        <i:EventTrigger EventName="PreviewMouseUp">
                                            <i:InvokeCommandAction Command="{Binding SetFocus}" CommandParameter="{Binding Value, RelativeSource={RelativeSource AncestorType=Slider}}" />
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>
                                </Slider>
                                <Button Grid.Column="2" IsEnabled="{Binding IsTransmitEnabled}" Width="24" Height="24" ToolTip="Focus Far" Margin="0,0,0,20">
                                    <Path Data="{DynamicResource FocusFar}" Fill="#FF7EE07E" Stretch="Uniform"/>
                                
                                    <i:Interaction.Triggers>
                                        <i:EventTrigger EventName="PreviewMouseDown">
                                            <i:InvokeCommandAction Command="{Binding Transmit}" CommandParameter="{x:Static local:tpCommandKeys.STARTFOCUSFAR}"/>
                                        </i:EventTrigger>
                                        <i:EventTrigger EventName="PreviewMouseUp">
                                            <i:InvokeCommandAction Command="{Binding Transmit}" CommandParameter="{x:Static local:tpCommandKeys.STOPFOCUSFAR}"/>
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>
                                </Button>
                                <TextBox Grid.Column="1" Text="{Binding FocusValue, Mode=TwoWay}" HorizontalAlignment="Center" Margin="0,35,0,0" VerticalAlignment="Top" Width="120" FontWeight="Bold" HorizontalContentAlignment="Center">
                                    <TextBox.InputBindings>
                                        <KeyBinding Key="Return" Command="{Binding SetFocus}"/>
                                    </TextBox.InputBindings>
                                </TextBox>
                            </Grid>
                        </GroupBox>
                        <Canvas>
                            <Label Content="{Binding FocusSpeed}" Canvas.Top="6" Canvas.Right="4" FontWeight="Bold" Tag="{x:Static local:tpCONST.FOCUSPEED}">
                                <i:Interaction.Triggers>
                                    <i:EventTrigger EventName="MouseDoubleClick">
                                        <i:InvokeCommandAction Command="{Binding ShowSpeedSelection}" CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Label}}"/>
                                    </i:EventTrigger>
                                </i:Interaction.Triggers>
                            </Label>
                        </Canvas>
                    </Grid>
                </StackPanel>

                <Separator Grid.Row="3" Background="#FF3D3D3D" Height="2"/>
                
                <StackPanel Grid.Row="4">
                    <Grid>
                        <GroupBox Header="IRIS" IsEnabled="True">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="48"/>
                                    <ColumnDefinition/>
                                    <ColumnDefinition Width="48"/>
                                </Grid.ColumnDefinitions>

                                <Button Grid.Column="0" IsEnabled="{Binding IsTransmitEnabled}" Width="24" Height="24" ToolTip="Iris Open" Margin="0,0,0,20">
                                    <Path Data="{DynamicResource IrisOpen}" Fill="#FF7EE07E" Stretch="Uniform"/>

                                    <i:Interaction.Triggers>
                                        <i:EventTrigger EventName="PreviewMouseDown">
                                            <i:InvokeCommandAction Command="{Binding Transmit}" CommandParameter="{x:Static local:tpCommandKeys.STARTIRISOPEN}"/>
                                        </i:EventTrigger>
                                        <i:EventTrigger EventName="PreviewMouseUp">
                                            <i:InvokeCommandAction Command="{Binding Transmit}" CommandParameter="{x:Static local:tpCommandKeys.STOPIRISOPEN}"/>
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>
                                </Button>
                                <Slider  Grid.Column="1"
                                         Minimum="{Binding IrisMin}"
                                         Maximum="{Binding IrisMax}"
                                         Value="{Binding IrisValue, Mode=TwoWay}" Margin="4,10,4,0">
                                    <i:Interaction.Triggers>
                                        <i:EventTrigger EventName="PreviewMouseUp">
                                            <i:InvokeCommandAction Command="{Binding SetIris}" CommandParameter="{Binding Value, RelativeSource={RelativeSource AncestorType=Slider}}" />
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>
                                </Slider>
                                <Button Grid.Column="2" IsEnabled="{Binding IsTransmitEnabled}" Width="24" Height="24" ToolTip="Iris Close" Margin="0,0,0,20">
                                    <Path Data="{DynamicResource IrisClose}" Fill="#FF7EE07E" Stretch="Uniform"/>
                                
                                    <i:Interaction.Triggers>
                                        <i:EventTrigger EventName="PreviewMouseDown">
                                            <i:InvokeCommandAction Command="{Binding Transmit}" CommandParameter="{x:Static local:tpCommandKeys.STARTIRISCLOSE}"/>
                                        </i:EventTrigger>
                                        <i:EventTrigger EventName="PreviewMouseUp">
                                            <i:InvokeCommandAction Command="{Binding Transmit}" CommandParameter="{x:Static local:tpCommandKeys.STOPIRISCLOSE}"/>
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>
                                </Button>
                                <TextBox Grid.Column="1" Text="{Binding IrisValue, Mode=TwoWay}" HorizontalAlignment="Center" Margin="0,35,0,0" VerticalAlignment="Top" Width="120" FontWeight="Bold" HorizontalContentAlignment="Center">
                                    <TextBox.InputBindings>
                                        <KeyBinding Key="Return" Command="{Binding SetIris}"/>
                                    </TextBox.InputBindings>
                                </TextBox>
                            </Grid>
                        </GroupBox>
                        <Canvas>
                            <Label Content="{Binding IrisSpeed}" Canvas.Top="6" Canvas.Right="4" FontWeight="Bold" Tag="{x:Static local:tpCONST.IRISSPEED}">
                                <i:Interaction.Triggers>
                                    <i:EventTrigger EventName="MouseDoubleClick">
                                        <i:InvokeCommandAction Command="{Binding ShowSpeedSelection}" CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Label}}"/>
                                    </i:EventTrigger>
                                </i:Interaction.Triggers>
                            </Label>
                        </Canvas>
                    </Grid>
                </StackPanel>
                <Separator Grid.Row="6" Background="#FF3D3D3D" Height="2"/>
                <StackPanel Grid.Row="7" Height="420">
                    <Image />

                </StackPanel>
                
                <Canvas>
                    <Canvas.InputBindings>
                        <MouseBinding MouseAction="LeftClick" Command="{Binding CanvasMouseDownCommand}" />
                    </Canvas.InputBindings>
                    <ContentControl Content="{Binding SpeedSelection}"
                                    Visibility="{Binding SpeedSelection.IsVisible}"
                                    Canvas.Top="{Binding DataContext.CanvasTop, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=UserControl}}"
                                    Canvas.Right="4">
                    </ContentControl>
                </Canvas>
                <!--<Popup IsOpen="true" StaysOpen="false" Placement="Absolute" PopupAnimation="Slide" HorizontalOffset="20" VerticalOffset="20">
                    <Border BorderBrush="#FF3D3D3D" Background="#FF1E1E1E" BorderThickness="1" CornerRadius="8" Opacity="0.5">
                        <ContentControl Content="{Binding SpeedSelection}"
                                    Visibility="{Binding SpeedSelection.IsVisible}">
                        </ContentControl>
                    </Border>
                </Popup>-->
            </Grid>    
        </StackPanel>
    </Grid>    

</UserControl>
